<!DOCTYPE html>
<html lang="en" class="dark"> <!-- Default to dark, JS will adjust -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yuriko | Bio</title>
    <link rel="icon" type="image/png" href="https://iili.io/fucrBTv.png">

    <!-- Performance: Preconnect to external domains -->
    <link rel="preconnect" href="https://cdn.tailwindcss.com">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://iili.io">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- FontAwesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <!-- Google Fonts: Outfit (Closest match to Google Sans) -->
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <script>
        // Check system preference or localStorage immediately to prevent flash
        if (localStorage.getItem('theme') === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        } else {
            document.documentElement.classList.remove('dark');
        }

        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    borderRadius: {
                        '4xl': '2rem',
                        '5xl': '2.5rem',
                    },
                    colors: {
                        cat: {
                            base: 'var(--cat-base)',
                            mantle: 'var(--cat-mantle)',
                            crust: 'var(--cat-crust)',
                            text: 'var(--cat-text)',
                            subtext1: 'var(--cat-subtext1)',
                            subtext0: 'var(--cat-subtext0)',
                            surface2: 'var(--cat-surface2)',
                            surface1: 'var(--cat-surface1)',
                            surface0: 'var(--cat-surface0)',
                            overlay0: 'var(--cat-overlay0)',
                            blue: 'var(--cat-blue)',
                            lavender: 'var(--cat-lavender)',
                            sapphire: 'var(--cat-sapphire)',
                            sky: 'var(--cat-sky)',
                            red: 'var(--cat-red)',
                            maroon: 'var(--cat-maroon)',
                            peach: 'var(--cat-peach)',
                            yellow: 'var(--cat-yellow)',
                            green: 'var(--cat-green)',
                            teal: 'var(--cat-teal)',
                            pink: 'var(--cat-pink)',
                            mauve: 'var(--cat-mauve)',
                            flamingo: 'var(--cat-flamingo)',
                        }
                    }
                }
            }
        }
    </script>

    <style>
        /* CSS Variables for Catppuccin Themes */
        :root {
            /* Latte (Light Mode) Palette */
            --cat-base: #eff1f5;
            --cat-mantle: #e6e9ef;
            --cat-crust: #dce0e8;
            --cat-text: #4c4f69;
            --cat-subtext1: #5c5f77;
            --cat-subtext0: #6c6f85;
            --cat-surface2: #acb0be;
            --cat-surface1: #bcc0cc;
            --cat-surface0: #ccd0da;
            --cat-overlay0: #7c7f93; 
            --cat-blue: #1e66f5;
            --cat-lavender: #7287fd;
            --cat-sapphire: #209fb5;
            --cat-sky: #04a5e5;
            --cat-red: #d20f39;
            --cat-maroon: #e64553;
            --cat-peach: #fe640b;
            --cat-yellow: #df8e1d;
            --cat-green: #40a02b;
            --cat-teal: #179299;
            --cat-pink: #ea76cb;
            --cat-mauve: #8839ef;
            --cat-flamingo: #dd7878;

            /* Glass Card - Light (Improved Readability) */
            --glass-bg: rgba(255, 255, 255, 0.90);
            --glass-border: rgba(200, 200, 200, 0.6);
            --glass-shadow: rgba(0, 0, 0, 0.15);
        }

        .dark {
            /* Mocha (Dark Mode) Palette */
            --cat-base: #1e1e2e;
            --cat-mantle: #181825;
            --cat-crust: #11111b;
            --cat-text: #cdd6f4;
            --cat-subtext1: #bac2de;
            --cat-subtext0: #a6adc8;
            --cat-surface2: #585b70;
            --cat-surface1: #45475a;
            --cat-surface0: #313244;
            --cat-overlay0: #6c7086;
            --cat-blue: #89b4fa;
            --cat-lavender: #b4befe;
            --cat-sapphire: #74c7ec;
            --cat-sky: #89dceb;
            --cat-red: #f38ba8;
            --cat-maroon: #eba0ac;
            --cat-peach: #fab387;
            --cat-yellow: #f9e2af;
            --cat-green: #a6e3a1;
            --cat-teal: #94e2d5;
            --cat-pink: #f5c2e7;
            --cat-mauve: #cba6f7;
            --cat-flamingo: #f2cdcd;

            /* Glass Card - Dark (Mica Style) */
            /* Darker tint, letting background colors bleed through */
            --glass-bg: rgba(30, 30, 46, 0.70);
            --glass-border: rgba(255, 255, 255, 0.08);
            --glass-shadow: rgba(0, 0, 0, 0.3);
        }

        body {
            font-family: 'Outfit', sans-serif;
            background-color: var(--cat-base);
            color: var(--cat-text);
            overflow-x: hidden;
            cursor: none;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        /* Background Image */
        .bg-animate {
            background-image: url('https://iili.io/fRwTOSj.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            /* Blur effect */
            filter: blur(3px);
            /* Performance: Force GPU acceleration */
            transform: scale(1.02) translateZ(0);
            backface-visibility: hidden;
            will-change: transform; 
        }

        /* Glassmorphism Card (Mica Effect) */
        .glass-card {
            background: var(--glass-bg);
            /* Mica Effect: Higher blur radius + Saturation boost */
            backdrop-filter: blur(25px) saturate(150%);
            -webkit-backdrop-filter: blur(25px) saturate(150%);
            border: 1px solid var(--glass-border);
            box-shadow: 0 8px 32px 0 var(--glass-shadow);
            transition: background 0.3s ease, border-color 0.3s ease;
            /* Performance: Optimize rendering */
            will-change: transform, opacity;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: var(--cat-base);
        }
        ::-webkit-scrollbar-thumb {
            background: var(--cat-mauve);
            border-radius: 4px;
        }

        /* Cursor Styles */
        #cursor {
            position: fixed;
            top: 0;
            left: 0;
            width: 20px;
            height: 20px;
            border: 2px solid var(--cat-mauve);
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
            transform: translate(-50%, -50%);
            transition: transform 0.1s ease, width 0.3s, height 0.3s, border-color 0.3s;
            mix-blend-mode: difference;
            will-change: transform, width, height; 
        }

        #cursor-dot {
            position: fixed;
            top: 0;
            left: 0;
            width: 6px;
            height: 6px;
            background-color: var(--cat-mauve);
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
            transform: translate(-50%, -50%);
            transition: background-color 0.3s;
            will-change: transform; 
        }

        /* Trail Canvas */
        #trail-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9998;
        }

        /* Hover State for Cursor */
        body.hovering #cursor {
            width: 40px;
            height: 40px;
            background-color: var(--cat-mauve); 
            opacity: 0.3;
            border-color: transparent;
        }

        /* MOBILE OPTIMIZATION: Hide cursor and trail on touch devices to fix lag */
        @media (hover: none) and (pointer: coarse) {
            #cursor, #cursor-dot, #trail-canvas {
                display: none !important;
            }
            body {
                cursor: auto; /* Restore native scrolling behavior */
            }
        }

        /* Fade In Animation */
        .fade-in-up {
            animation: fadeInUp 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
            opacity: 0;
            transform: translateY(20px);
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .delay-100 { animation-delay: 0.1s; }
        .delay-200 { animation-delay: 0.2s; }
        .delay-300 { animation-delay: 0.3s; }
        .delay-400 { animation-delay: 0.4s; }
        .delay-500 { animation-delay: 0.5s; }
        .delay-600 { animation-delay: 0.6s; }
        .delay-700 { animation-delay: 0.7s; }

        /* Social Icon Hover */
        .social-link {
            transition: all 0.3s ease;
        }
        .social-link:hover {
            transform: translateY(-5px);
            color: var(--cat-mauve);
        }

        /* Theme Toggle Button */
        .theme-toggle {
            position: fixed;
            top: 1.5rem;
            right: 1.5rem;
            z-index: 50;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            color: var(--cat-text);
            padding: 0.75rem;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 4px 12px var(--glass-shadow);
            backdrop-filter: blur(4px);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 48px;
            height: 48px;
        }
        .theme-toggle:hover {
            transform: scale(1.1);
            color: var(--cat-yellow);
            border-color: var(--cat-yellow);
        }
    </style>
</head>
<body>

    <!-- Background Elements -->
    <div class="bg-animate"></div>
    <canvas id="trail-canvas"></canvas>
    
    <!-- Custom Cursor Elements -->
    <div id="cursor"></div>
    <div id="cursor-dot"></div>

    <!-- Theme Toggle Button -->
    <button id="theme-toggle" class="theme-toggle group" aria-label="Toggle Dark Mode">
        <i class="fas fa-moon text-xl hidden dark:block"></i>
        <i class="fas fa-sun text-xl block dark:hidden"></i>
    </button>

    <!-- Main Content -->
    <main class="min-h-screen flex items-center justify-center p-4 relative z-10">
        
        <div class="glass-card w-full max-w-2xl rounded-3xl p-8 md:p-12 fade-in-up">
            
            <!-- Header / Profile -->
            <div class="flex flex-col md:flex-row items-center md:items-start gap-8 mb-8">
                <!-- Avatar Placeholder with Glow -->
                <div class="relative group">
                    <div class="absolute -inset-1 bg-gradient-to-r from-cat-sky via-cat-mauve to-cat-pink rounded-full blur opacity-50 group-hover:opacity-100 transition duration-1000 group-hover:duration-200"></div>
                    <div class="relative w-32 h-32 rounded-full overflow-hidden border-2 border-cat-surface1 bg-cat-mantle flex items-center justify-center">
                        <img src="https://iili.io/fucrBTv.png" alt="Yuriko" class="w-full h-full object-cover">
                    </div>
                </div>

                <div class="text-center md:text-left flex-1">
                    <h1 class="text-4xl md:text-5xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-cat-lavender to-cat-mauve mb-2">Yuriko</h1>
                    <div class="flex flex-wrap gap-2 justify-center md:justify-start mb-4 text-sm font-medium text-cat-subtext0">
                        <span class="px-3 py-1 rounded-full bg-cat-surface0/50 border border-cat-surface1">11th Grade (PCM)</span>
                        <span class="px-3 py-1 rounded-full bg-cat-surface0/50 border border-cat-surface1"><i class="fas fa-cake-candles mr-2 text-cat-pink"></i>Jan 31</span>
                        <span class="px-3 py-1 rounded-full bg-cat-surface0/50 border border-cat-surface1"><i class="fas fa-mars mr-2 text-cat-blue"></i>he/him</span>
                        <span class="px-3 py-1 rounded-full bg-cat-surface0/50 border border-cat-surface1"><i class="fas fa-brain mr-2 text-cat-mauve"></i>INFP-T</span>
                        <span class="px-3 py-1 rounded-full bg-cat-surface0/50 border border-cat-surface1"><i class="fas fa-location-dot mr-2 text-cat-green"></i>India</span>
                    </div>
                    <p class="text-cat-subtext1 leading-relaxed max-w-md mx-auto md:mx-0">
                        Hey! I'm into music, animanga, tech, gaming, and a bit of badminton! 
                        I watch and read all genres, although my personal favorites are romance, action, and slice of life.
                    </p>
                </div>
            </div>

            <hr class="border-cat-surface1/50 mb-8 fade-in-up delay-100">

            <!-- Interests Grid -->
            <div class="mb-8 fade-in-up delay-200">
                <h3 class="text-sm uppercase tracking-wider text-cat-lavender font-bold mb-4 drop-shadow-md">Interests</h3>
                <div class="flex flex-wrap gap-3">
                    <span class="px-4 py-2 rounded-lg bg-cat-surface0 hover:bg-cat-surface1 border border-cat-surface1 hover:border-cat-mauve/50 transition-colors cursor-none text-sm text-cat-text"><i class="fas fa-music mr-2 text-cat-blue"></i>Music</span>
                    <span class="px-4 py-2 rounded-lg bg-cat-surface0 hover:bg-cat-surface1 border border-cat-surface1 hover:border-cat-mauve/50 transition-colors cursor-none text-sm text-cat-text"><i class="fas fa-film mr-2 text-cat-peach"></i>Animanga</span>
                    <span class="px-4 py-2 rounded-lg bg-cat-surface0 hover:bg-cat-surface1 border border-cat-surface1 hover:border-cat-mauve/50 transition-colors cursor-none text-sm text-cat-text"><i class="fas fa-laptop-code mr-2 text-cat-teal"></i>Tech</span>
                    <span class="px-4 py-2 rounded-lg bg-cat-surface0 hover:bg-cat-surface1 border border-cat-surface1 hover:border-cat-mauve/50 transition-colors cursor-none text-sm text-cat-text"><i class="fas fa-gamepad mr-2 text-cat-green"></i>Gaming</span>
                    <span class="px-4 py-2 rounded-lg bg-cat-surface0 hover:bg-cat-surface1 border border-cat-surface1 hover:border-cat-mauve/50 transition-colors cursor-none text-sm text-cat-text"><i class="fas fa-feather mr-2 text-cat-yellow"></i>Badminton</span>
                </div>
            </div>

            <!-- Social Links -->
            <div class="mb-8 fade-in-up delay-300">
                <h3 class="text-sm uppercase tracking-wider text-cat-lavender font-bold mb-4 drop-shadow-md">Connect</h3>
                <div class="grid grid-cols-2 sm:grid-cols-4 gap-4">
                    
                    <a href="https://x.com/yuriko_o1" target="_blank" class="social-link group flex flex-col items-center justify-center p-4 rounded-xl bg-cat-surface0/40 hover:bg-cat-surface0 border border-cat-surface1/50 hover:border-cat-mauve/30">
                        <i class="fa-brands fa-x-twitter text-2xl mb-2 group-hover:scale-110 transition-transform"></i>
                        <span class="text-xs text-cat-subtext0">Twitter/X</span>
                    </a>

                    <a href="https://discord.com/users/947775206141870111" target="_blank" class="social-link group flex flex-col items-center justify-center p-4 rounded-xl bg-cat-surface0/40 hover:bg-cat-surface0 border border-cat-surface1/50 hover:border-cat-mauve/30">
                        <i class="fab fa-discord text-2xl mb-2 group-hover:scale-110 transition-transform"></i>
                        <span class="text-xs text-cat-subtext0">Discord</span>
                    </a>

                    <a href="https://github.com/yurikodesu" target="_blank" class="social-link group flex flex-col items-center justify-center p-4 rounded-xl bg-cat-surface0/40 hover:bg-cat-surface0 border border-cat-surface1/50 hover:border-cat-mauve/30">
                        <i class="fab fa-github text-2xl mb-2 group-hover:scale-110 transition-transform"></i>
                        <span class="text-xs text-cat-subtext0">GitHub</span>
                    </a>

                    <a href="https://www.reddit.com/user/icedchocolatecake/" target="_blank" class="social-link group flex flex-col items-center justify-center p-4 rounded-xl bg-cat-surface0/40 hover:bg-cat-surface0 border border-cat-surface1/50 hover:border-cat-mauve/30">
                        <i class="fab fa-reddit-alien text-2xl mb-2 group-hover:scale-110 transition-transform"></i>
                        <span class="text-xs text-cat-subtext0">Reddit</span>
                    </a>

                    <a href="https://open.spotify.com/user/31jpbocyu5ppi2z6o2xym2k5ai6y?si=1579fd4c63a24656" target="_blank" class="social-link group flex flex-col items-center justify-center p-4 rounded-xl bg-cat-surface0/40 hover:bg-cat-surface0 border border-cat-surface1/50 hover:border-cat-mauve/30">
                        <i class="fab fa-spotify text-2xl mb-2 group-hover:scale-110 transition-transform"></i>
                        <span class="text-xs text-cat-subtext0">Spotify</span>
                    </a>

                    <a href="https://www.last.fm/user/itsyuriko" target="_blank" class="social-link group flex flex-col items-center justify-center p-4 rounded-xl bg-cat-surface0/40 hover:bg-cat-surface0 border border-cat-surface1/50 hover:border-cat-mauve/30">
                        <i class="fab fa-lastfm text-2xl mb-2 group-hover:scale-110 transition-transform"></i>
                        <span class="text-xs text-cat-subtext0">Last.fm</span>
                    </a>

                    <a href="https://anilist.co/user/Yuriko/" target="_blank" class="social-link group flex flex-col items-center justify-center p-4 rounded-xl bg-cat-surface0/40 hover:bg-cat-surface0 border border-cat-surface1/50 hover:border-cat-mauve/30">
                        <span class="text-xs text-cat-subtext0">AniList</span>
                    </a>

                     <a href="https://bento.me/yurikoo" target="_blank" class="social-link group flex flex-col items-center justify-center p-4 rounded-xl bg-cat-surface0/40 hover:bg-cat-surface0 border border-cat-surface1/50 hover:border-cat-mauve/30">
                        <span class="text-xs text-cat-subtext0">Bento.me</span>
                    </a>

                </div>
            </div>

            <!-- Discord Widget -->
            <div class="mb-8 fade-in-up delay-400">
                <h3 class="text-sm uppercase tracking-wider text-cat-lavender font-bold mb-4 drop-shadow-md">Discord Status</h3>
                <div class="flex justify-center">
                    <a href="https://discord.com/users/947775206141870111" target="_blank">
                        <img src="https://discord.c99.nl/widget/theme-3/947775206141870111.png" alt="Discord Status" loading="lazy" class="rounded-xl shadow-lg hover:scale-[1.02] transition-transform duration-300">
                    </a>
                </div>
            </div>

            <!-- Last.fm Widget -->
            <div class="mb-8 fade-in-up delay-500">
                <h3 class="text-sm uppercase tracking-wider text-cat-lavender font-bold mb-4 drop-shadow-md">Recently Played</h3>
                <div class="flex justify-center">
                    <a href="https://www.last.fm/user/itsyuriko" target="_blank" class="w-full max-w-md">
                        <img src="https://lastfm-recently-played.vercel.app/api?user=itsyuriko" alt="Last.fm Recently Played" loading="lazy" class="rounded-xl shadow-lg hover:scale-[1.02] transition-transform duration-300 w-full">
                    </a>
                </div>
            </div>

            <!-- Playlist Embed -->
            <div class="fade-in-up delay-600">
                <h3 class="text-sm uppercase tracking-wider text-cat-lavender font-bold mb-4 drop-shadow-md">Playlist</h3>
                <div class="rounded-xl overflow-hidden">
                    <iframe style="border-radius:12px" src="https://open.spotify.com/embed/playlist/2yMliAqvt3JHQ89sl6vGc0?utm_source=generator" width="100%" height="352" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
                </div>
            </div>

            <div class="mt-8 text-center fade-in-up delay-700">
                <p class="text-xs text-cat-overlay0">Â© 2025 Yuriko</p>
            </div>
        </div>
    </main>

    <script>
        // --- Theme Toggle Logic ---
        const themeToggleBtn = document.getElementById('theme-toggle');
        const htmlElement = document.documentElement;

        // Force update particles on theme change
        themeToggleBtn.addEventListener('click', () => {
            if (htmlElement.classList.contains('dark')) {
                htmlElement.classList.remove('dark');
                localStorage.setItem('theme', 'light');
            } else {
                htmlElement.classList.add('dark');
                localStorage.setItem('theme', 'dark');
            }
            // Update active particles to new colors immediately
            particles.forEach(p => p.color = getRandomColor());
        });

        // --- Custom Cursor & Trail Logic ---

        const cursor = document.getElementById('cursor');
        const cursorDot = document.getElementById('cursor-dot');
        const canvas = document.getElementById('trail-canvas');
        const ctx = canvas.getContext('2d');

        // Check if device is mobile/touch to stop animation loop
        const isTouchDevice = window.matchMedia("(hover: none) and (pointer: coarse)").matches;

        let mouseX = -100;
        let mouseY = -100;
        let cursorX = -100;
        let cursorY = -100;

        // Debounce resize to save performance
        let resizeTimeout;
        function resizeCanvas() {
            if (isTouchDevice) return; // Skip on mobile
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(() => {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            }, 100);
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        // Track mouse movement
        document.addEventListener('mousemove', (e) => {
            if (isTouchDevice) return; 
            mouseX = e.clientX;
            mouseY = e.clientY;
        });

        // Hover effects for links/buttons
        const interactables = document.querySelectorAll('a, button, .group');
        interactables.forEach(el => {
            el.addEventListener('mouseenter', () => {
                if (!isTouchDevice) document.body.classList.add('hovering');
            });
            el.addEventListener('mouseleave', () => {
                if (!isTouchDevice) document.body.classList.remove('hovering');
            });
        });

        function getRandomColor() {
            const isDark = htmlElement.classList.contains('dark');
            const colors = isDark 
                ? ['#cba6f7', '#f5c2e7', '#89b4fa'] // Mauve, Pink, Blue
                : ['#8839ef', '#ea76cb', '#1e66f5']; // Darker variants
            return colors[Math.floor(Math.random() * colors.length)];
        }

        // --- RAM & CPU OPTIMIZATION: Object Pooling ---
        
        // Pre-allocate particles to avoid Garbage Collection lag
        const MAX_PARTICLES = 20; // Reduced from 40
        const particles = new Array(MAX_PARTICLES).fill(null);
        let particleIndex = 0; // Circular buffer index

        class Particle {
            constructor() {
                this.active = false;
                this.x = 0;
                this.y = 0;
                this.size = 0;
                this.speedX = 0;
                this.speedY = 0;
                this.life = 0;
                this.color = '';
            }

            spawn(x, y) {
                this.x = x;
                this.y = y;
                this.size = Math.random() * 3 + 1;
                this.speedX = Math.random() * 1 - 0.5;
                this.speedY = Math.random() * 1 - 0.5;
                this.life = 1; 
                this.color = getRandomColor();
                this.active = true;
            }

            update() {
                if (!this.active) return;
                
                this.x += this.speedX;
                this.y += this.speedY;
                this.life -= 0.03; // Faster fade out to clear screen quicker
                if (this.size > 0.1) this.size -= 0.05;

                if (this.life <= 0) this.active = false;
            }

            draw() {
                if (!this.active) return;
                
                ctx.fillStyle = this.color;
                ctx.globalAlpha = this.life;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
                ctx.globalAlpha = 1;
            }
        }

        // Initialize Pool
        for (let i = 0; i < MAX_PARTICLES; i++) {
            particles[i] = new Particle();
        }

        function animate() {
            // OPTIMIZATION: Stop completely on mobile or if hidden
            if (isTouchDevice || document.hidden) {
                requestAnimationFrame(animate);
                return;
            }

            // Smooth cursor movement (Lag effect)
            let distX = mouseX - cursorX;
            let distY = mouseY - cursorY;
            
            cursorX += distX * 0.15;
            cursorY += distY * 0.15;

            cursor.style.left = cursorX + 'px';
            cursor.style.top = cursorY + 'px';
            cursorDot.style.left = mouseX + 'px';
            cursorDot.style.top = mouseY + 'px';

            // Create trail particles - Throttled by distance
            if (Math.abs(distX) > 5 || Math.abs(distY) > 5) {
                if (Math.random() > 0.5) { 
                    // Recycle particle from pool
                    particles[particleIndex].spawn(cursorX, cursorY);
                    particleIndex = (particleIndex + 1) % MAX_PARTICLES;
                }
            }

            // Clear & Draw
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Iterate over fixed pool (no array resizing)
            for (let i = 0; i < MAX_PARTICLES; i++) {
                particles[i].update();
                particles[i].draw();
            }

            requestAnimationFrame(animate);
        }

        animate();
    </script>
</body>
</html>